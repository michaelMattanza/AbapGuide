<h1>CS_BOM_EXPL_MAT_V2</h1>
Esplosione BOM materiale
```abap 
*"*"Local Interface:
*"  IMPORTING
*"     VALUE(FTREL) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(ALEKZ) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(ALTVO) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(AUFSW) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(AUMGB) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(AUMNG) LIKE  STKO-BMENG DEFAULT 0
*"     VALUE(AUSKZ) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(AMIND) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(BAGRP) LIKE  MARA-MATNR DEFAULT SPACE
*"     VALUE(BEIKZ) LIKE  STPO-BEIKZ DEFAULT SPACE
*"     VALUE(BESSL) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(BGIXO) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(BREMS) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(CAPID) LIKE  TC04-CAPID DEFAULT 'STD1'
*"     VALUE(CHLST) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(COSPR) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(CUOBJ) LIKE  MARC-CUOBJ DEFAULT 000000000000000
*"     VALUE(CUOVS) TYPE  IBVERSION DEFAULT 0
*"     VALUE(CUOLS) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(DATUV) LIKE  STKO-DATUV DEFAULT 00000000
*"     VALUE(DELNL) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(DRLDT) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(EHNDL) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(EMENG) LIKE  STKO-BMENG DEFAULT 0
*"     VALUE(ERSKZ) LIKE  STPO-ERSKZ DEFAULT SPACE
*"     VALUE(ERSSL) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(FBSTP) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(KNFBA) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(KSBVO) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(MBWLS) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(MKTLS) LIKE  CSDATA-XFELD DEFAULT 'X'
*"     VALUE(MDMPS) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(MEHRS) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(MKMAT) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(MMAPS) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(SALWW) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(SPLWW) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(MMORY) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(MTNRV) LIKE  MARA-MATNR DEFAULT SPACE
*"     VALUE(NLINK) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(POSTP) LIKE  STPO-POSTP DEFAULT SPACE
*"     VALUE(RNDKZ) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(RVREL) LIKE  STPO-RVREL DEFAULT SPACE
*"     VALUE(SANFR) LIKE  STPO-SANFE DEFAULT SPACE
*"     VALUE(SANIN) LIKE  STPO-SANIN DEFAULT SPACE
*"     VALUE(SANKA) LIKE  STPO-SANKA DEFAULT SPACE
*"     VALUE(SANKO) LIKE  STPO-SANKO DEFAULT SPACE
*"     VALUE(SANVS) LIKE  STPO-SANVS DEFAULT SPACE
*"     VALUE(SCHGT) LIKE  STPO-SCHGT DEFAULT SPACE
*"     VALUE(STKKZ) LIKE  STPO-STKKZ DEFAULT SPACE
*"     VALUE(STLAL) LIKE  STKO-STLAL DEFAULT SPACE
*"     VALUE(STLAN) LIKE  STZU-STLAN DEFAULT SPACE
*"     VALUE(STPST) LIKE  STPOX-STUFE DEFAULT 0
*"     VALUE(SVWVO) LIKE  CSDATA-XFELD DEFAULT 'X'
*"     VALUE(WERKS) LIKE  MARC-WERKS DEFAULT SPACE
*"     VALUE(NORVL) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(MDNOT) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(PANOT) LIKE  CSDATA-XFELD DEFAULT SPACE
*"     VALUE(QVERW) LIKE  TMQ2-USEQU DEFAULT SPACE
*"     VALUE(VERID) LIKE  MKAL-VERID DEFAULT SPACE
*"     VALUE(VRSVO) LIKE  CSDATA-XFELD DEFAULT 'X'
*"     VALUE(SGT_SCAT) TYPE  SGT_SCAT OPTIONAL
*"     VALUE(SGT_REL) TYPE  SGT_REL OPTIONAL
*"     VALUE(CALLER_APP) TYPE  CALLER_APP OPTIONAL
*"     VALUE(BOM_VERSN) TYPE  BOM_VERSION OPTIONAL
*"  EXPORTING
*"     VALUE(TOPMAT) LIKE  CSTMAT STRUCTURE  CSTMAT
*"     VALUE(DSTST) LIKE  CSDATA-XFELD
*"  TABLES
*"      STB STRUCTURE  STPOX
*"      MATCAT STRUCTURE  CSCMAT OPTIONAL
*"  EXCEPTIONS
*"      ALT_NOT_FOUND
*"      CALL_INVALID
*"      MATERIAL_NOT_FOUND
*"      MISSING_AUTHORIZATION
*"      NO_BOM_FOUND
*"      NO_PLANT_DATA
*"      NO_SUITABLE_BOM_FOUND
*"      CONVERSION_ERROR

      CALL FUNCTION 'CS_BOM_EXPL_MAT_V2'
        EXPORTING
          capid                 = 'PP01'
          datuv                 = i_expdate
*         emeng                 = CONV basmn(  lw_vendutoxperiodo-Quantity  )
          emeng                 = 1
          mtnrv                 = lw_vendutoxperiodo-material
          werks                 = mp_plant
          vrsvo                 = abap_true
          mehrs                 = abap_true
          mktls                 = abap_true
        TABLES
          stb                   = lt_bomexp[]
        EXCEPTIONS
          alt_not_found         = 1
          call_invalid          = 2
          material_not_found    = 3
          missing_authorization = 4
          no_bom_found          = 5
          no_plant_data         = 6
          no_suitable_bom_found = 7
          conversion_error      = 8
          not_supported         = 9
          db_not_supported      = 10
          no_valid_to           = 11
          OTHERS                = 12.
```
